<!DOCTYPE html>
<html>

<head>
	<title>Home</title>
	<link rel="stylesheet" href="styles.css" />
</head>

<body>
	<div class="container">
		<h1>Welcome</h1>
		<div id="userSection">
			<div id="loggedOutContent">
				<a href="/login.html">Login</a>
				<a href="/register.html">Register</a>
			</div>
			<div id="loggedInContent" style="display: none">
				<p>Logged in as <span id="username"></span></p>
				<button onclick="logout()">Logout</button>
			</div>
		</div>
	</div>
	<script>
		async function checkLoginStatus() {
			try {
				const response = await fetch('/api/user');
				if (response.ok) {
					const data = await response.json();
					document.getElementById('username').textContent = data.username;
					document.getElementById('loggedInContent').style.display = 'block';
					document.getElementById('loggedOutContent').style.display = 'none';
				}
			} catch (error) {
				console.error('Error checking login status:', error);
			}
		}

		async function logout() {
			const response = await fetch('/api/logout', { method: 'POST' });
			if (response.ok) {
				window.location.reload();
			}
		}

		checkLoginStatus();
	</script>
</body>

</html>